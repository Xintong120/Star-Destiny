# 紫微命盘 Star-Destiny

这是一个基于 Vue 3 的紫微斗数命盘应用，旨在提供一个现代化、功能丰富的在线紫微命盘排盘和分析工具。本项目使用 `iztro` 作为核心计算引擎，结合现代化的前端技术栈，为用户提供流畅、直观的命盘体验。

体验地址：https://xintong120.github.io/Star-Destiny/

## ✨ 功能特性

- **多层级运限选择**: 支持大限、流年、流月的精确排盘，让您轻松分析不同时期的运势变化。
- **星耀解释系统**: 点击14主星即可查看详细解释，帮助您深入理解星耀含义（其他星耀解释持续更新中）。
- **状态持久化**: 自动保存用户的命盘配置和运限选择，刷新页面后可恢复，提供无缝的使用体验。
- **高效缓存机制**: 内置多层缓存（运限数据、命盘数据、状态），避免重复计算，确保应用运行流畅。
- **关注点分离**: 业务逻辑与UI展示分离，代码结构清晰，易于维护和扩展。

## 📖 使用说明

1. **开始排盘**
   - 输入农历或阳历生日时辰即可开始排盘
   - 系统会自动计算并显示完整的命盘信息

2. **运限切换**
   - 点击大限/流年可以重叠显示不同运限的宫位
   - 显示和隐藏按钮位于命盘中心，个人信息下方

3. **流月查看**
   - 点击流月按钮可以查看当前流月的命宫位置
   - 帮助分析月运变化

4. **宫位分析**
   - 点击任意宫位可以查看该宫位的三方四正
   - 便于分析宫位之间的关联性

5. **星耀解释**
   - 点击14主星可以查看相关解释
   - 目前仅支持主星解释，其他星耀解释持续更新中

6. **四化显示**
   - 红色：本命四化
   - 绿色：大限四化
   - 蓝色：流年四化

7. **待开发功能**
   - 流日流时功能正在开发中，敬请期待

## 🚀 技术栈

- **前端框架**: Vue 3 + Vite
- **UI 组件库**: Element Plus
- **状态管理**: Pinia
- **路由管理**: Vue Router
- **样式处理**: SCSS
- **紫微斗数计算引擎**: [iztro](https://github.com/iztro/iztro)

## 📦 安装与运行

1.  **克隆项目到本地**
    ```bash
    git clone https://github.com/your-username/Star-Destiny.git
    cd Star-Destiny
    ```

2.  **安装依赖**
    推荐使用 `pnpm` 或 `npm` 进行安装：
    ```bash
    npm install
    ```

3.  **启动开发服务器**
    ```bash
    npm run dev
    ```
    启动后，在浏览器中打开 `http://localhost:5173` (Vite 默认端口) 即可访问。

4.  **构建项目**
    ```bash
    npm run build
    ```
    构建产物将输出到 `dist` 目录。

5.  **预览构建产物**
    ```bash
    npm run preview
    ```

## 📂 项目结构

```
Star-Destiny/
├── src/
│   ├── assets/           # 静态资源
│   ├── astro/            # 命盘计算相关类
│   ├── components/       # Vue组件
│   ├── composables/      # 组合式API
│   ├── data/             # 静态数据
│   ├── i18n/             # 国际化
│   ├── router/           # 路由配置
│   ├── services/         # 服务层
│   ├── star/             # 星体相关
│   ├── stores/           # Pinia状态管理
│   ├── utils/            # 工具函数
│   ├── App.vue           # 根组件
│   └── main.js           # 入口文件
├── public/               # 公共资源
├── README.md             # 项目说明
└── package.json          # 项目依赖
... 更多配置文件
```

## 🔧 核心逻辑

项目采用了分层架构，将命盘计算逻辑与 UI 展示清晰地分离，以保证代码的可维护性和可扩展性。

- **服务层 (`services`)**: 封装了核心的命盘计算逻辑，包括运限计算、宫位名称处理和时间周期计算等。
- **状态管理 (`stores`)**: 使用 Pinia 进行全局状态管理，实现了响应式的数据更新和状态的持久化存储。
- **组件设计 (`components`)**: 组件遵循单一职责原则，UI 组件负责展示，逻辑通过服务和 Composables 提供。

## 🌟 后续计划

- [ ] 完善流日和流时功能，实现更详细的数据计算。
- [ ] 增加单元测试和端到端测试，提高代码质量和稳定性。
- [ ] 持续优化性能，包括缓存策略和渲染性能。
- [ ] 增强用户交互，添加更多关于星耀的知识。
- [ ] 提供主题切换功能（如深色模式）。

---

感谢使用 Star-Destiny！如果你有任何建议或问题，欢迎提出 Issue。
